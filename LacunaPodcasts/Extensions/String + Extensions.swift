//
//  String + Extensions.swift
//  LacunaPodcasts
//
//  Created by Priscilla Ip on 2020-06-30.
//  Copyright Â© 2020 Priscilla Ip. All rights reserved.
//

import Foundation

extension String {

    func stripOutHtml() -> String? {
        do {
            guard let data = self.data(using: .unicode) else {
                return nil
            }
            let attributed = try NSAttributedString(data: data, options: [.documentType: NSAttributedString.DocumentType.html, .characterEncoding: String.Encoding.utf8.rawValue], documentAttributes: nil)
            return attributed.string
        } catch {
            return nil
        }
    }
    
    func toSecureHTTPS() -> String {
        return self.contains("https") ? self : self.replacingOccurrences(of: "http", with: "https")
    }
    
    func collapseText(to indexDistance: IndexDistance) -> String {
        if let index = self.index(self.startIndex, offsetBy: indexDistance, limitedBy: self.endIndex) {
            return String(self[...index] + "... more")
        } else { return "" }
    }
    
    

    
    
    
}
